/*! Bespoke.js v0.0.1-alpha-2 | (c) 2012 Mark Dalgleish | Licensed MIT */
(function(e,t,n,r){"use strict";function i(e){e=typeof e=="string"?{selector:s.selector}:e;var t=u({},s,e),r=n.querySelectorAll(t.selector)[0],i=o(r.children),a=i[0],f=function(e){return i[e]||e},l=function(e,t){return i[i.indexOf(e)+t]},h=function(e){return l(e,1)},d=function(e){return l(e,-1)},m=function(){b(h(a))},y=function(){b(d(a))},b=function(e){if(e==null)return;a=f(e),i.forEach(w),c(a,"active"),v(a,"inactive")},w=function(e,t){g(e,["before+","before-[0-9]+","after","after-[0-9]+","active"]);if(e===a)return;var n=t-i.indexOf(a),r=n>0?"after":"before";p(e,["inactive",r,r+"-"+Math.abs(n)])},E=function(e){var t=e.which||e.keyCode;t===37?y():(t===32||t===39)&&m()};return b(i[0]),c(r,"parent"),c(i,"slide"),n.addEventListener("keydown",E),function(){var e,t,r=function(e){return function(t){t.preventDefault(),t.touches.length===1&&e(t.touches[0].pageX)}};n.addEventListener("touchstart",r(function(t){e=t})),n.addEventListener("touchmove",r(function(e){t=e})),n.addEventListener("touchend",function(){var n=t-e;if(Math.abs(n)<50)return;n>0?y():m()})}(),{activate:b,next:m,prev:y}}var s={selector:"article"},o=function(e){return[].slice.call(e,0)},u=function(e){return o(arguments).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},a=function(t){return t=t===e?t:e+"-"+t},f=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)","gi")},l=function(e,t){return f(t).test(e.className)},c=function(e,t){return r(e)&&h(e,t)||r(t)&&p(e,t)||d(e,t)},h=function(e,t){e.forEach(function(e){c(e,t)})},p=function(e,t){t.forEach(function(t){c(e,t)})},d=function(e,t){t=a(t),l(e,t)||(e.className+=(e.className?" ":"")+t)},v=function(e,t){return r(e)&&m(e,t)||r(t)&&g(e,t)||y(e,t)},m=function(e,t){e.forEach(function(e){v(e,t)})},g=function(e,t){t.forEach(function(t){v(e,t)})},y=function(e,t){t=a(t),l(e,t)&&(e.className=e.className.replace(f(t)," ").replace(/^\s+|\s+$/g,""))};t[e]={defaults:s,from:i}})("bespoke",this,this.document,Array.isArray);
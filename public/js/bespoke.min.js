/*! Bespoke.js v0.0.1-alpha | (c) 2012 Mark Dalgleish | Licensed MIT */
(function(e,t,n){"use strict";function r(e){e=typeof e=="string"?{selector:i.selector}:e;var t=o({},i,e),n=document.querySelectorAll(t.selector)[0],r=s(n.children),u=r[0],a=function(e){return r[e]||e},f=function(e,t){return r[r.indexOf(e)+t]},c=function(e){return f(e,1)},p=function(e){return f(e,-1)},v=function(){y(c(u))},g=function(){y(p(u))},y=function(e){if(e==null)return;u=a(e),r.forEach(b),l(u,"active"),d(u,"inactive")},b=function(e,t){m(e,["before+","before-[0-9]+","after","after-[0-9]+","active"]);if(e===u)return;var n=t-r.indexOf(u),i=n>0?"after":"before";h(e,["inactive",i,i+"-"+Math.abs(n)])},w=function(e){var t=e.which||e.keyCode;t===37?g():(t===32||t===39)&&v()};return y(r[0]),l(n,"parent"),l(r,"slide"),document.addEventListener("keydown",w),{activate:y,next:v,prev:g}}var i={selector:"article"},s=function(e){return[].slice.call(e,0)},o=function(e){return s(arguments).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},u=function(t){return t=t===e?t:e+"-"+t},a=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)","gi")},f=function(e,t){return a(t).test(e.className)},l=function(e,t){return n(e)&&c(e,t)||n(t)&&h(e,t)||p(e,t)},c=function(e,t){e.forEach(function(e){l(e,t)})},h=function(e,t){t.forEach(function(t){l(e,t)})},p=function(e,t){t=u(t),f(e,t)||(e.className+=(e.className?" ":"")+t)},d=function(e,t){return n(e)&&v(e,t)||n(t)&&m(e,t)||g(e,t)},v=function(e,t){e.forEach(function(e){d(e,t)})},m=function(e,t){t.forEach(function(t){d(e,t)})},g=function(e,t){t=u(t),f(e,t)&&(e.className=e.className.replace(a(t)," ").replace(/^\s+|\s+$/g,""))};t[e]={defaults:i,from:r}})("bespoke",this,Array.isArray);